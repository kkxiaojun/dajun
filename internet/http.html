<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HTTPS | KK的知识库</title>
    <meta name="description" content="KK的博客">
    <link rel="icon" href="/dajun/image/avator.png">
    
    <link rel="preload" href="/dajun/assets/css/0.styles.1f0e54bd.css" as="style"><link rel="preload" href="/dajun/assets/js/app.f343371c.js" as="script"><link rel="preload" href="/dajun/assets/js/2.0c3fdcc6.js" as="script"><link rel="preload" href="/dajun/assets/js/17.d9e6b636.js" as="script"><link rel="prefetch" href="/dajun/assets/js/10.fb249c9c.js"><link rel="prefetch" href="/dajun/assets/js/11.bcc32090.js"><link rel="prefetch" href="/dajun/assets/js/12.3163a14c.js"><link rel="prefetch" href="/dajun/assets/js/13.02ec6dfa.js"><link rel="prefetch" href="/dajun/assets/js/14.38bb0809.js"><link rel="prefetch" href="/dajun/assets/js/15.0c3815f1.js"><link rel="prefetch" href="/dajun/assets/js/16.e20b17d3.js"><link rel="prefetch" href="/dajun/assets/js/18.1de8ffb4.js"><link rel="prefetch" href="/dajun/assets/js/19.a8065c5a.js"><link rel="prefetch" href="/dajun/assets/js/20.49b7a7fc.js"><link rel="prefetch" href="/dajun/assets/js/21.9596bb56.js"><link rel="prefetch" href="/dajun/assets/js/22.e0d58b1e.js"><link rel="prefetch" href="/dajun/assets/js/23.395fd466.js"><link rel="prefetch" href="/dajun/assets/js/24.7c3f86b9.js"><link rel="prefetch" href="/dajun/assets/js/25.a851bdef.js"><link rel="prefetch" href="/dajun/assets/js/26.4154af63.js"><link rel="prefetch" href="/dajun/assets/js/27.5c137191.js"><link rel="prefetch" href="/dajun/assets/js/28.39ebcae8.js"><link rel="prefetch" href="/dajun/assets/js/29.153b65ae.js"><link rel="prefetch" href="/dajun/assets/js/3.badd9541.js"><link rel="prefetch" href="/dajun/assets/js/30.edf871b0.js"><link rel="prefetch" href="/dajun/assets/js/31.6ab9ff3c.js"><link rel="prefetch" href="/dajun/assets/js/32.9387a777.js"><link rel="prefetch" href="/dajun/assets/js/33.70b05627.js"><link rel="prefetch" href="/dajun/assets/js/4.94dcadd3.js"><link rel="prefetch" href="/dajun/assets/js/5.caab31e7.js"><link rel="prefetch" href="/dajun/assets/js/6.b93fae90.js"><link rel="prefetch" href="/dajun/assets/js/7.5d572add.js"><link rel="prefetch" href="/dajun/assets/js/8.bfa11565.js"><link rel="prefetch" href="/dajun/assets/js/9.b6aaee89.js">
    <link rel="stylesheet" href="/dajun/assets/css/0.styles.1f0e54bd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/dajun/" class="home-link router-link-active"><img src="/dajun/image/avator.png" alt="KK的知识库" class="logo"> <span class="site-name can-hide">KK的知识库</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/dajun/" class="nav-link">主页</a></div><div class="nav-item"><a href="/dajun/javascript/" class="nav-link">JavaScript基础</a></div><div class="nav-item"><a href="/dajun/broswer/" class="nav-link">浏览器相关</a></div><div class="nav-item"><a href="/dajun/internet/" class="nav-link router-link-active">网络Http</a></div><div class="nav-item"><a href="/dajun/tcp/" class="nav-link">TCP</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架基础" class="dropdown-title"><span class="title">框架基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dajun/Vue/" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/dajun/React/" class="nav-link">React</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dajun/internet/" class="nav-link router-link-active">计算机网络</a></li><li class="dropdown-item"><!----> <a href="/dajun/sort/" class="nav-link">算法</a></li></ul></div></div><div class="nav-item"><a href="https:www.github.com/kkxiaojun" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/dajun/" class="nav-link">主页</a></div><div class="nav-item"><a href="/dajun/javascript/" class="nav-link">JavaScript基础</a></div><div class="nav-item"><a href="/dajun/broswer/" class="nav-link">浏览器相关</a></div><div class="nav-item"><a href="/dajun/internet/" class="nav-link router-link-active">网络Http</a></div><div class="nav-item"><a href="/dajun/tcp/" class="nav-link">TCP</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架基础" class="dropdown-title"><span class="title">框架基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dajun/Vue/" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/dajun/React/" class="nav-link">React</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dajun/internet/" class="nav-link router-link-active">计算机网络</a></li><li class="dropdown-item"><!----> <a href="/dajun/sort/" class="nav-link">算法</a></li></ul></div></div><div class="nav-item"><a href="https:www.github.com/kkxiaojun" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>网络相关</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dajun/internet/base.html" class="sidebar-link">HTTP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/base.html#http" class="sidebar-link">HTTP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/base.html#post-和-get-的区别" class="sidebar-link">Post 和 Get 的区别</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/base.html#常见状态码" class="sidebar-link">常见状态码</a></li></ul></li></ul></li><li><a href="/dajun/internet/http.html" class="active sidebar-link">HTTPS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/http.html#http-2-0" class="sidebar-link">HTTP 2.0</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/http.html#二进制传输" class="sidebar-link">二进制传输</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/http.html#多路复用" class="sidebar-link">多路复用</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/http.html#header-压缩" class="sidebar-link">Header 压缩</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/http.html#服务端-push" class="sidebar-link">服务端 Push</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/http.html#quic" class="sidebar-link">QUIC</a></li></ul></li></ul></li><li><a href="/dajun/internet/net.html" class="sidebar-link">HTTP详情</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#http详情" class="sidebar-link">HTTP详情</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#起始" class="sidebar-link">起始</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#头部" class="sidebar-link">头部</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#空行" class="sidebar-link">空行</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#实体" class="sidebar-link">实体</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#有哪些请求方法？" class="sidebar-link">有哪些请求方法？</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#get-和-post-有什么区别？" class="sidebar-link">GET 和 POST 有什么区别？</a></li></ul></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_003-如何理解-uri？" class="sidebar-link">003: 如何理解 URI？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#uri-的结构" class="sidebar-link">URI 的结构</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#uri-编码" class="sidebar-link">URI 编码</a></li></ul></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_004-如何理解-http-状态码？" class="sidebar-link">004: 如何理解 HTTP 状态码？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_1xx" class="sidebar-link">1xx</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_2xx" class="sidebar-link">2xx</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_3xx" class="sidebar-link">3xx</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_4xx" class="sidebar-link">4xx</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_5xx" class="sidebar-link">5xx</a></li></ul></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_005-简要概括一下-http-的特点？http-有哪些缺点？" class="sidebar-link">005: 简要概括一下 HTTP 的特点？HTTP 有哪些缺点？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#http-特点" class="sidebar-link">HTTP 特点</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#http-缺点" class="sidebar-link">HTTP 缺点</a></li></ul></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_006-对-accept-系列字段了解多少？" class="sidebar-link">006: 对 Accept 系列字段了解多少？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#数据格式" class="sidebar-link">数据格式</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#压缩方式" class="sidebar-link">压缩方式</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#支持语言" class="sidebar-link">支持语言</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#字符集" class="sidebar-link">字符集</a></li></ul></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_007-对于定长和不定长的数据，http-是怎么传输的？" class="sidebar-link">007: 对于定长和不定长的数据，HTTP 是怎么传输的？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#定长包体" class="sidebar-link">定长包体</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#不定长包体" class="sidebar-link">不定长包体</a></li></ul></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_008-http-如何处理大文件的传输？" class="sidebar-link">008: HTTP 如何处理大文件的传输？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#如何支持" class="sidebar-link">如何支持</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#range-字段拆解" class="sidebar-link">Range 字段拆解</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#单段数据" class="sidebar-link">单段数据</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#多段数据" class="sidebar-link">多段数据</a></li></ul></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_009-http-中如何处理表单数据的提交？" class="sidebar-link">009: HTTP 中如何处理表单数据的提交？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#application-x-www-form-urlencoded" class="sidebar-link">application/x-www-form-urlencoded</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#multipart-form-data" class="sidebar-link">multipart/form-data</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#小结" class="sidebar-link">小结</a></li></ul></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_010-http1-1-如何解决-http-的队头阻塞问题？" class="sidebar-link">010: HTTP1.1 如何解决 HTTP 的队头阻塞问题？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#什么是-http-队头阻塞？" class="sidebar-link">什么是 HTTP 队头阻塞？</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#并发连接" class="sidebar-link">并发连接</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#域名分片" class="sidebar-link">域名分片</a></li></ul></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_011-对-cookie-了解多少？" class="sidebar-link">011: 对 Cookie 了解多少？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#cookie-简介" class="sidebar-link">Cookie 简介</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#cookie-属性" class="sidebar-link">Cookie 属性</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#cookie-的缺点" class="sidebar-link">Cookie 的缺点</a></li></ul></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_012-如何理解-http-代理？" class="sidebar-link">012: 如何理解 HTTP 代理？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#功能" class="sidebar-link">功能</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#相关头部字段" class="sidebar-link">相关头部字段</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#x-forwarded-for产生的问题" class="sidebar-link">X-Forwarded-For产生的问题</a></li></ul></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_013-如何理解-http-缓存及缓存代理？" class="sidebar-link">013: 如何理解 HTTP 缓存及缓存代理？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#为什么产生代理缓存？" class="sidebar-link">为什么产生代理缓存？</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#源服务器的缓存控制" class="sidebar-link">源服务器的缓存控制</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#客户端的缓存控制" class="sidebar-link">客户端的缓存控制</a></li></ul></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_014-什么是跨域？浏览器如何拦截响应？如何解决？" class="sidebar-link">014: 什么是跨域？浏览器如何拦截响应？如何解决？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#什么是跨域" class="sidebar-link">什么是跨域</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#cors" class="sidebar-link">CORS</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#jsonp" class="sidebar-link">JSONP</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#nginx" class="sidebar-link">Nginx</a></li></ul></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_015-tls1-2-握手的过程是怎样的？" class="sidebar-link">015: TLS1.2 握手的过程是怎样的？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#传统-rsa-握手" class="sidebar-link">传统 RSA 握手</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#tls-1-2-握手过程" class="sidebar-link">TLS 1.2 握手过程</a></li></ul></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_016-tls-1-3-做了哪些改进？" class="sidebar-link">016: TLS 1.3 做了哪些改进？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#强化安全" class="sidebar-link">强化安全</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#提升性能" class="sidebar-link">提升性能</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#总结" class="sidebar-link">总结</a></li></ul></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_017-http-2-有哪些改进？" class="sidebar-link">017: HTTP/2 有哪些改进？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#头部压缩" class="sidebar-link">头部压缩</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#多路复用" class="sidebar-link">多路复用</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#服务器推送" class="sidebar-link">服务器推送</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#总结-2" class="sidebar-link">总结</a></li></ul></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_018-http-2-中的二进制帧是如何设计的？" class="sidebar-link">018: HTTP/2 中的二进制帧是如何设计的？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#帧结构" class="sidebar-link">帧结构</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#流的状态变化" class="sidebar-link">流的状态变化</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#流的特性" class="sidebar-link">流的特性</a></li></ul></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="https"><a href="#https" class="header-anchor">#</a> HTTPS</h1> <p>tcp 三次握手</p> <p>简单讲了一下非对称加密的握手过程
证书签名过程和如何防止被串改</p> <p>HTTPS 加密(对称加密有AES + CHACHA20, 分组模式以前有 CBC、CTR，TLS1.3 中只剩下 GCM，非对称加密 RSA、ECDHE)</p> <p>怎么握手的呢？(讲了三个版本：传统 RSA、TLS1.2、TLS1.3, 后面也讲了 TLS1.3 的 Session ID、Session Ticket 以及 PSK)</p> <p>HTTPS 如何保证数据是否被篡改？(说了下有签名的过程)</p> <p>签名是什么原理(私钥加密，公钥解密，比对哈希摘要)</p> <p>https://juejin.im/post/5e7d4e8b6fb9a03c6422f112</p> <p>HTTPS 还是通过了 HTTP 来传输信息，但是信息通过 TLS 协议进行了加密。</p> <h3 id="tls"><a href="#tls" class="header-anchor">#</a> TLS</h3> <p>TLS 协议位于传输层之上，应用层之下。首次进行 TLS 协议传输需要两个 RTT ，接下来可以通过 Session Resumption 减少到一个 RTT。</p> <p>在 TLS 中使用了两种加密技术，分别为：对称加密和非对称加密。</p> <p><strong>对称加密</strong>：</p> <p>对称加密就是两边拥有相同的秘钥，两边都知道如何将密文加密解密。</p> <p><strong>非对称加密</strong>：</p> <p>有公钥私钥之分，公钥所有人都可以知道，可以将数据用公钥加密，但是将数据解密必须使用私钥解密，私钥只有分发公钥的一方才知道。</p> <p><strong>TLS 握手过程如下图：</strong></p> <p><img src="https://yck-1254263422.cos.ap-shanghai.myqcloud.com/blog/2019-06-01-042644.jpg" alt=""></p> <ol><li>客户端发送一个随机值，需要的协议和加密方式</li> <li>服务端收到客户端的随机值，自己也产生一个随机值，并根据客户端需求的协议和加密方式来使用对应的方式，发送自己的证书（如果需要验证客户端证书需要说明）</li> <li>客户端收到服务端的证书并验证是否有效，验证通过会再生成一个随机值，通过服务端证书的公钥去加密这个随机值并发送给服务端，如果服务端需要验证客户端证书的话会附带证书</li> <li>服务端收到加密过的随机值并使用私钥解密获得第三个随机值，这时候两端都拥有了三个随机值，可以通过这三个随机值按照之前约定的加密方式生成密钥，接下来的通信就可以通过该密钥来加密解密</li></ol> <p>通过以上步骤可知，在 TLS 握手阶段，两端使用非对称加密的方式来通信，但是因为非对称加密损耗的性能比对称加密大，所以在正式传输数据时，两端使用对称加密的方式通信。</p> <p>PS：以上说明的都是 TLS 1.2 协议的握手情况，在 1.3 协议中，首次建立连接只需要一个 RTT，后面恢复连接不需要 RTT 了。</p> <h2 id="http-2-0"><a href="#http-2-0" class="header-anchor">#</a> HTTP 2.0</h2> <p>HTTP 2.0 相比于 HTTP 1.X，可以说是大幅度提高了 web 的性能。</p> <p>在 HTTP 1.X 中，为了性能考虑，我们会引入雪碧图、将小图内联、使用多个域名等等的方式。这一切都是因为浏览器限制了同一个域名下的请求数量，当页面中需要请求很多资源的时候，队头阻塞（Head of line blocking）会导致在达到最大请求数量时，剩余的资源需要等待其他资源请求完成后才能发起请求。</p> <p>你可以通过 <a href="https://http2.akamai.com/demo" target="_blank" rel="noopener noreferrer">该链接<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 感受下 HTTP 2.0 比 HTTP 1.X 到底快了多少。</p> <p><img src="https://yck-1254263422.cos.ap-shanghai.myqcloud.com/blog/2019-06-01-042644.png" alt=""></p> <p>在 HTTP 1.X 中，因为队头阻塞的原因，你会发现请求是这样的</p> <p><img src="https://yck-1254263422.cos.ap-shanghai.myqcloud.com/blog/2019-06-01-042646.png" alt=""></p> <p>在 HTTP 2.0 中，因为引入了多路复用，你会发现请求是这样的</p> <p><img src="https://yck-1254263422.cos.ap-shanghai.myqcloud.com/blog/2019-06-01-042647.png" alt=""></p> <h3 id="二进制传输"><a href="#二进制传输" class="header-anchor">#</a> 二进制传输</h3> <p>HTTP 2.0 中所有加强性能的核心点在于此。在之前的 HTTP 版本中，我们是通过文本的方式传输数据。在 HTTP 2.0 中引入了新的编码机制，所有传输的数据都会被分割，并采用二进制格式编码。</p> <p><img src="https://yck-1254263422.cos.ap-shanghai.myqcloud.com/blog/2019-06-01-042649.png" alt=""></p> <h3 id="多路复用"><a href="#多路复用" class="header-anchor">#</a> 多路复用</h3> <p>在 HTTP 2.0 中，有两个非常重要的概念，分别是帧（frame）和流（stream）。</p> <p>帧代表着最小的数据单位，每个帧会标识出该帧属于哪个流，流也就是多个帧组成的数据流。</p> <p>多路复用，就是在一个 TCP 连接中可以存在多条流。换句话说，也就是可以发送多个请求，对端可以通过帧中的标识知道属于哪个请求。通过这个技术，可以避免 HTTP 旧版本中的队头阻塞问题，极大的提高传输性能。</p> <p><img src="https://yck-1254263422.cos.ap-shanghai.myqcloud.com/blog/2019-06-01-042650.png" alt=""></p> <h3 id="header-压缩"><a href="#header-压缩" class="header-anchor">#</a> Header 压缩</h3> <p>在 HTTP 1.X 中，我们使用文本的形式传输 header，在 header 携带 cookie 的情况下，可能每次都需要重复传输几百到几千的字节。</p> <p>在 HTTP 2.0 中，使用了 HPACK 压缩格式对传输的 header 进行编码，减少了 header 的大小。并在两端维护了索引表，用于记录出现过的 header ，后面在传输过程中就可以传输已经记录过的 header 的键名，对端收到数据后就可以通过键名找到对应的值。</p> <p><font color="red">哈夫曼编码</font></p> <h3 id="服务端-push"><a href="#服务端-push" class="header-anchor">#</a> 服务端 Push</h3> <p>在 HTTP 2.0 中，服务端可以在客户端某个请求后，主动推送其他资源。</p> <p>可以想象以下情况，某些资源客户端是一定会请求的，这时就可以采取服务端 push 的技术，提前给客户端推送必要的资源，这样就可以相对减少一点延迟时间。当然在浏览器兼容的情况下你也可以使用 prefetch 。</p> <h3 id="quic"><a href="#quic" class="header-anchor">#</a> QUIC</h3> <p>这是一个谷歌出品的基于 UDP 实现的同为传输层的协议，目标很远大，希望替代 TCP 协议。</p> <ul><li>该协议支持多路复用，虽然 HTTP 2.0 也支持多路复用，但是下层仍是 TCP，因为 TCP 的重传机制，只要一个包丢失就得判断丢失包并且重传，导致发生队头阻塞的问题，但是 UDP 没有这个机制</li> <li>实现了自己的加密协议，通过类似 TCP 的 TFO 机制可以实现 0-RTT，当然 TLS 1.3 已经实现了 0-RTT 了</li> <li>支持重传和纠错机制（向前恢复），在只丢失一个包的情况下不需要重传，使用纠错机制恢复丢失的包
<ul><li>纠错机制：通过异或的方式，算出发出去的数据的异或值并单独发出一个包，服务端在发现有一个包丢失的情况下，通过其他数据包和异或值包算出丢失包</li> <li>在丢失两个包或以上的情况就使用重传机制，因为算不出来了</li></ul></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4/6/2020, 6:48:32 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/dajun/internet/base.html" class="prev">HTTP</a></span> <span class="next"><a href="/dajun/internet/net.html">HTTP详情</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/dajun/assets/js/app.f343371c.js" defer></script><script src="/dajun/assets/js/2.0c3fdcc6.js" defer></script><script src="/dajun/assets/js/17.d9e6b636.js" defer></script>
  </body>
</html>
