<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>KK的知识库</title>
    <meta name="description" content="KK的博客">
    <link rel="icon" href="/dajun/image/avator.png">
    
    <link rel="preload" href="/dajun/assets/css/0.styles.1f0e54bd.css" as="style"><link rel="preload" href="/dajun/assets/js/app.f343371c.js" as="script"><link rel="preload" href="/dajun/assets/js/2.0c3fdcc6.js" as="script"><link rel="preload" href="/dajun/assets/js/19.a8065c5a.js" as="script"><link rel="prefetch" href="/dajun/assets/js/10.fb249c9c.js"><link rel="prefetch" href="/dajun/assets/js/11.bcc32090.js"><link rel="prefetch" href="/dajun/assets/js/12.3163a14c.js"><link rel="prefetch" href="/dajun/assets/js/13.02ec6dfa.js"><link rel="prefetch" href="/dajun/assets/js/14.38bb0809.js"><link rel="prefetch" href="/dajun/assets/js/15.0c3815f1.js"><link rel="prefetch" href="/dajun/assets/js/16.e20b17d3.js"><link rel="prefetch" href="/dajun/assets/js/17.d9e6b636.js"><link rel="prefetch" href="/dajun/assets/js/18.1de8ffb4.js"><link rel="prefetch" href="/dajun/assets/js/20.49b7a7fc.js"><link rel="prefetch" href="/dajun/assets/js/21.9596bb56.js"><link rel="prefetch" href="/dajun/assets/js/22.e0d58b1e.js"><link rel="prefetch" href="/dajun/assets/js/23.395fd466.js"><link rel="prefetch" href="/dajun/assets/js/24.7c3f86b9.js"><link rel="prefetch" href="/dajun/assets/js/25.a851bdef.js"><link rel="prefetch" href="/dajun/assets/js/26.4154af63.js"><link rel="prefetch" href="/dajun/assets/js/27.5c137191.js"><link rel="prefetch" href="/dajun/assets/js/28.39ebcae8.js"><link rel="prefetch" href="/dajun/assets/js/29.153b65ae.js"><link rel="prefetch" href="/dajun/assets/js/3.badd9541.js"><link rel="prefetch" href="/dajun/assets/js/30.edf871b0.js"><link rel="prefetch" href="/dajun/assets/js/31.6ab9ff3c.js"><link rel="prefetch" href="/dajun/assets/js/32.9387a777.js"><link rel="prefetch" href="/dajun/assets/js/33.70b05627.js"><link rel="prefetch" href="/dajun/assets/js/4.94dcadd3.js"><link rel="prefetch" href="/dajun/assets/js/5.caab31e7.js"><link rel="prefetch" href="/dajun/assets/js/6.b93fae90.js"><link rel="prefetch" href="/dajun/assets/js/7.5d572add.js"><link rel="prefetch" href="/dajun/assets/js/8.bfa11565.js"><link rel="prefetch" href="/dajun/assets/js/9.b6aaee89.js">
    <link rel="stylesheet" href="/dajun/assets/css/0.styles.1f0e54bd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/dajun/" class="home-link router-link-active"><img src="/dajun/image/avator.png" alt="KK的知识库" class="logo"> <span class="site-name can-hide">KK的知识库</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/dajun/" class="nav-link">主页</a></div><div class="nav-item"><a href="/dajun/javascript/" class="nav-link">JavaScript基础</a></div><div class="nav-item"><a href="/dajun/broswer/" class="nav-link">浏览器相关</a></div><div class="nav-item"><a href="/dajun/internet/" class="nav-link router-link-exact-active router-link-active">网络Http</a></div><div class="nav-item"><a href="/dajun/tcp/" class="nav-link">TCP</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架基础" class="dropdown-title"><span class="title">框架基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dajun/Vue/" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/dajun/React/" class="nav-link">React</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dajun/internet/" class="nav-link router-link-exact-active router-link-active">计算机网络</a></li><li class="dropdown-item"><!----> <a href="/dajun/sort/" class="nav-link">算法</a></li></ul></div></div><div class="nav-item"><a href="https:www.github.com/kkxiaojun" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/dajun/" class="nav-link">主页</a></div><div class="nav-item"><a href="/dajun/javascript/" class="nav-link">JavaScript基础</a></div><div class="nav-item"><a href="/dajun/broswer/" class="nav-link">浏览器相关</a></div><div class="nav-item"><a href="/dajun/internet/" class="nav-link router-link-exact-active router-link-active">网络Http</a></div><div class="nav-item"><a href="/dajun/tcp/" class="nav-link">TCP</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架基础" class="dropdown-title"><span class="title">框架基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dajun/Vue/" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/dajun/React/" class="nav-link">React</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dajun/internet/" class="nav-link router-link-exact-active router-link-active">计算机网络</a></li><li class="dropdown-item"><!----> <a href="/dajun/sort/" class="nav-link">算法</a></li></ul></div></div><div class="nav-item"><a href="https:www.github.com/kkxiaojun" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>网络相关</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dajun/internet/base.html" class="sidebar-link">HTTP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/base.html#http" class="sidebar-link">HTTP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/base.html#post-和-get-的区别" class="sidebar-link">Post 和 Get 的区别</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/base.html#常见状态码" class="sidebar-link">常见状态码</a></li></ul></li></ul></li><li><a href="/dajun/internet/http.html" class="sidebar-link">HTTPS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/http.html#http-2-0" class="sidebar-link">HTTP 2.0</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/http.html#二进制传输" class="sidebar-link">二进制传输</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/http.html#多路复用" class="sidebar-link">多路复用</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/http.html#header-压缩" class="sidebar-link">Header 压缩</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/http.html#服务端-push" class="sidebar-link">服务端 Push</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/http.html#quic" class="sidebar-link">QUIC</a></li></ul></li></ul></li><li><a href="/dajun/internet/net.html" class="sidebar-link">HTTP详情</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#http详情" class="sidebar-link">HTTP详情</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#起始" class="sidebar-link">起始</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#头部" class="sidebar-link">头部</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#空行" class="sidebar-link">空行</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#实体" class="sidebar-link">实体</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#有哪些请求方法？" class="sidebar-link">有哪些请求方法？</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#get-和-post-有什么区别？" class="sidebar-link">GET 和 POST 有什么区别？</a></li></ul></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_003-如何理解-uri？" class="sidebar-link">003: 如何理解 URI？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#uri-的结构" class="sidebar-link">URI 的结构</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#uri-编码" class="sidebar-link">URI 编码</a></li></ul></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_004-如何理解-http-状态码？" class="sidebar-link">004: 如何理解 HTTP 状态码？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_1xx" class="sidebar-link">1xx</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_2xx" class="sidebar-link">2xx</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_3xx" class="sidebar-link">3xx</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_4xx" class="sidebar-link">4xx</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_5xx" class="sidebar-link">5xx</a></li></ul></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_005-简要概括一下-http-的特点？http-有哪些缺点？" class="sidebar-link">005: 简要概括一下 HTTP 的特点？HTTP 有哪些缺点？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#http-特点" class="sidebar-link">HTTP 特点</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#http-缺点" class="sidebar-link">HTTP 缺点</a></li></ul></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_006-对-accept-系列字段了解多少？" class="sidebar-link">006: 对 Accept 系列字段了解多少？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#数据格式" class="sidebar-link">数据格式</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#压缩方式" class="sidebar-link">压缩方式</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#支持语言" class="sidebar-link">支持语言</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#字符集" class="sidebar-link">字符集</a></li></ul></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_007-对于定长和不定长的数据，http-是怎么传输的？" class="sidebar-link">007: 对于定长和不定长的数据，HTTP 是怎么传输的？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#定长包体" class="sidebar-link">定长包体</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#不定长包体" class="sidebar-link">不定长包体</a></li></ul></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_008-http-如何处理大文件的传输？" class="sidebar-link">008: HTTP 如何处理大文件的传输？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#如何支持" class="sidebar-link">如何支持</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#range-字段拆解" class="sidebar-link">Range 字段拆解</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#单段数据" class="sidebar-link">单段数据</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#多段数据" class="sidebar-link">多段数据</a></li></ul></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_009-http-中如何处理表单数据的提交？" class="sidebar-link">009: HTTP 中如何处理表单数据的提交？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#application-x-www-form-urlencoded" class="sidebar-link">application/x-www-form-urlencoded</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#multipart-form-data" class="sidebar-link">multipart/form-data</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#小结" class="sidebar-link">小结</a></li></ul></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_010-http1-1-如何解决-http-的队头阻塞问题？" class="sidebar-link">010: HTTP1.1 如何解决 HTTP 的队头阻塞问题？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#什么是-http-队头阻塞？" class="sidebar-link">什么是 HTTP 队头阻塞？</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#并发连接" class="sidebar-link">并发连接</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#域名分片" class="sidebar-link">域名分片</a></li></ul></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_011-对-cookie-了解多少？" class="sidebar-link">011: 对 Cookie 了解多少？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#cookie-简介" class="sidebar-link">Cookie 简介</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#cookie-属性" class="sidebar-link">Cookie 属性</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#cookie-的缺点" class="sidebar-link">Cookie 的缺点</a></li></ul></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_012-如何理解-http-代理？" class="sidebar-link">012: 如何理解 HTTP 代理？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#功能" class="sidebar-link">功能</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#相关头部字段" class="sidebar-link">相关头部字段</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#x-forwarded-for产生的问题" class="sidebar-link">X-Forwarded-For产生的问题</a></li></ul></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_013-如何理解-http-缓存及缓存代理？" class="sidebar-link">013: 如何理解 HTTP 缓存及缓存代理？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#为什么产生代理缓存？" class="sidebar-link">为什么产生代理缓存？</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#源服务器的缓存控制" class="sidebar-link">源服务器的缓存控制</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#客户端的缓存控制" class="sidebar-link">客户端的缓存控制</a></li></ul></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_014-什么是跨域？浏览器如何拦截响应？如何解决？" class="sidebar-link">014: 什么是跨域？浏览器如何拦截响应？如何解决？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#什么是跨域" class="sidebar-link">什么是跨域</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#cors" class="sidebar-link">CORS</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#jsonp" class="sidebar-link">JSONP</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#nginx" class="sidebar-link">Nginx</a></li></ul></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_015-tls1-2-握手的过程是怎样的？" class="sidebar-link">015: TLS1.2 握手的过程是怎样的？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#传统-rsa-握手" class="sidebar-link">传统 RSA 握手</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#tls-1-2-握手过程" class="sidebar-link">TLS 1.2 握手过程</a></li></ul></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_016-tls-1-3-做了哪些改进？" class="sidebar-link">016: TLS 1.3 做了哪些改进？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#强化安全" class="sidebar-link">强化安全</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#提升性能" class="sidebar-link">提升性能</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#总结" class="sidebar-link">总结</a></li></ul></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_017-http-2-有哪些改进？" class="sidebar-link">017: HTTP/2 有哪些改进？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#头部压缩" class="sidebar-link">头部压缩</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#多路复用" class="sidebar-link">多路复用</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#服务器推送" class="sidebar-link">服务器推送</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#总结-2" class="sidebar-link">总结</a></li></ul></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#_018-http-2-中的二进制帧是如何设计的？" class="sidebar-link">018: HTTP/2 中的二进制帧是如何设计的？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#帧结构" class="sidebar-link">帧结构</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#流的状态变化" class="sidebar-link">流的状态变化</a></li><li class="sidebar-sub-header"><a href="/dajun/internet/net.html#流的特性" class="sidebar-link">流的特性</a></li></ul></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>HTTP长连接和短连接这个说法是有有问题的。应该是TCP（传输层协议）连接。</p> <ol><li>http是应用层协议。应该是http请求/http响应</li> <li>http1.0默认的是短连接，http1.1后默认的是长连接</li></ol> <p><strong>TCP长连接</strong>
tcp建立一次连接后不关闭（具体的时间长短，是可以在header当中进行设置的，也就是所谓的超时时间）。web中的js,css，html都是可以缓存的</p> <p><strong>TCP短连接</strong>
tcp每次建立连接后，请求完成，连接关闭。下次传输连接需要再次建立。</p> <h3 id="http-首部"><a href="#http-首部" class="header-anchor">#</a> HTTP 首部</h3> <table><thead><tr><th style="text-align:center;">通用字段</th> <th style="text-align:center;">作用</th></tr></thead> <tbody><tr><td style="text-align:center;">Cache-Control</td> <td style="text-align:center;">控制缓存的行为</td></tr> <tr><td style="text-align:center;">Connection</td> <td style="text-align:center;">浏览器想要优先使用的连接类型，比如  <code>keep-alive</code></td></tr> <tr><td style="text-align:center;">Date</td> <td style="text-align:center;">创建报文时间</td></tr> <tr><td style="text-align:center;">Pragma</td> <td style="text-align:center;">报文指令</td></tr> <tr><td style="text-align:center;">Via</td> <td style="text-align:center;">代理服务器相关信息</td></tr> <tr><td style="text-align:center;">Transfer-Encoding</td> <td style="text-align:center;">传输编码方式</td></tr> <tr><td style="text-align:center;">Upgrade</td> <td style="text-align:center;">要求客户端升级协议</td></tr> <tr><td style="text-align:center;">Warning</td> <td style="text-align:center;">在内容中可能存在错误</td></tr></tbody></table> <table><thead><tr><th style="text-align:center;">请求字段</th> <th style="text-align:center;">作用</th></tr></thead> <tbody><tr><td style="text-align:center;">Accept</td> <td style="text-align:center;">能正确接收的媒体类型</td></tr> <tr><td style="text-align:center;">Accept-Charset</td> <td style="text-align:center;">能正确接收的字符集</td></tr> <tr><td style="text-align:center;">Accept-Encoding</td> <td style="text-align:center;">能正确接收的编码格式列表</td></tr> <tr><td style="text-align:center;">Accept-Language</td> <td style="text-align:center;">能正确接收的语言列表</td></tr> <tr><td style="text-align:center;">Expect</td> <td style="text-align:center;">期待服务端的指定行为</td></tr> <tr><td style="text-align:center;">From</td> <td style="text-align:center;">请求方邮箱地址</td></tr> <tr><td style="text-align:center;">Host</td> <td style="text-align:center;">服务器的域名</td></tr> <tr><td style="text-align:center;">If-Match</td> <td style="text-align:center;">两端资源标记比较</td></tr> <tr><td style="text-align:center;">If-Modified-Since</td> <td style="text-align:center;">本地资源未修改返回 304（比较时间）</td></tr> <tr><td style="text-align:center;">If-None-Match</td> <td style="text-align:center;">本地资源未修改返回 304（比较标记）</td></tr> <tr><td style="text-align:center;">User-Agent</td> <td style="text-align:center;">客户端信息</td></tr> <tr><td style="text-align:center;">Max-Forwards</td> <td style="text-align:center;">限制可被代理及网关转发的次数</td></tr> <tr><td style="text-align:center;">Proxy-Authorization</td> <td style="text-align:center;">向代理服务器发送验证信息</td></tr> <tr><td style="text-align:center;">Range</td> <td style="text-align:center;">请求某个内容的一部分</td></tr> <tr><td style="text-align:center;">Referer</td> <td style="text-align:center;">表示浏览器所访问的前一个页面</td></tr> <tr><td style="text-align:center;">TE</td> <td style="text-align:center;">传输编码方式</td></tr></tbody></table> <table><thead><tr><th style="text-align:center;">响应字段</th> <th style="text-align:center;">作用</th></tr></thead> <tbody><tr><td style="text-align:center;">Accept-Ranges</td> <td style="text-align:center;">是否支持某些种类的范围</td></tr> <tr><td style="text-align:center;">Age</td> <td style="text-align:center;">资源在代理缓存中存在的时间</td></tr> <tr><td style="text-align:center;">ETag</td> <td style="text-align:center;">资源标识</td></tr> <tr><td style="text-align:center;">Location</td> <td style="text-align:center;">客户端重定向到某个 URL</td></tr> <tr><td style="text-align:center;">Proxy-Authenticate</td> <td style="text-align:center;">向代理服务器发送验证信息</td></tr> <tr><td style="text-align:center;">Server</td> <td style="text-align:center;">服务器名字</td></tr> <tr><td style="text-align:center;">WWW-Authenticate</td> <td style="text-align:center;">获取资源需要的验证信息</td></tr></tbody></table> <table><thead><tr><th style="text-align:center;">实体字段</th> <th style="text-align:center;">作用</th></tr></thead> <tbody><tr><td style="text-align:center;">Allow</td> <td style="text-align:center;">资源的正确请求方式</td></tr> <tr><td style="text-align:center;">Content-Encoding</td> <td style="text-align:center;">内容的编码格式</td></tr> <tr><td style="text-align:center;">Content-Language</td> <td style="text-align:center;">内容使用的语言</td></tr> <tr><td style="text-align:center;">Content-Length</td> <td style="text-align:center;">request body 长度</td></tr> <tr><td style="text-align:center;">Content-Location</td> <td style="text-align:center;">返回数据的备用地址</td></tr> <tr><td style="text-align:center;">Content-MD5</td> <td style="text-align:center;">Base64加密格式的内容 MD5检验值</td></tr> <tr><td style="text-align:center;">Content-Range</td> <td style="text-align:center;">内容的位置范围</td></tr> <tr><td style="text-align:center;">Content-Type</td> <td style="text-align:center;">内容的媒体类型</td></tr> <tr><td style="text-align:center;">Expires</td> <td style="text-align:center;">内容的过期时间</td></tr> <tr><td style="text-align:center;">Last_modified</td> <td style="text-align:center;">内容的最后修改时间</td></tr></tbody></table> <p>PS：缓存相关已在别的模块中写完，你可以 <a href="/dajun/Performance/performance-ch.html#缓存">阅读该小节</a></p> <h2 id="dns"><a href="#dns" class="header-anchor">#</a> DNS</h2> <p>DNS 的作用就是通过域名查询到具体的 IP。</p> <p>因为 IP 存在数字和英文的组合（IPv6），很不利于人类记忆，所以就出现了域名。你可以把域名看成是某个 IP 的别名，DNS 就是去查询这个别名的真正名称是什么。</p> <p>在 TCP 握手之前就已经进行了 DNS 查询，这个查询是操作系统自己做的。当你在浏览器中想访问 <code>www.google.com</code> 时，会进行一下操作：</p> <ol><li>操作系统会首先在本地缓存中查询</li> <li>没有的话会去系统配置的 DNS 服务器中查询</li> <li>如果这时候还没得话，会直接去 DNS 根服务器查询，这一步查询会找出负责 <code>com</code> 这个一级域名的服务器</li> <li>然后去该服务器查询 <code>google</code> 这个二级域名</li> <li>接下来三级域名的查询其实是我们配置的，你可以给 <code>www</code> 这个域名配置一个 IP，然后还可以给别的三级域名配置一个 IP</li></ol> <p>以上介绍的是 DNS 迭代查询，还有种是递归查询，区别就是前者是由客户端去做请求，后者是由系统配置的 DNS 服务器做请求，得到结果后将数据返回给客户端。</p> <p>PS：DNS 是基于 UDP 做的查询。</p> <h2 id="从输入-url-到页面加载完成的过程"><a href="#从输入-url-到页面加载完成的过程" class="header-anchor">#</a> 从输入 URL 到页面加载完成的过程</h2> <p>这是一个很经典的面试题，在这题中可以将本文讲得内容都串联起来。</p> <ol><li>首先做 DNS 查询，如果这一步做了智能 DNS 解析的话，会提供访问速度最快的 IP 地址回来</li> <li>接下来是 TCP 握手，应用层会下发数据给传输层，这里 TCP 协议会指明两端的端口号，然后下发给网络层。网络层中的 IP 协议会确定 IP 地址，并且指示了数据传输中如何跳转路由器。然后包会再被封装到数据链路层的数据帧结构中，最后就是物理层面的传输了</li> <li>TCP 握手结束后会进行 TLS 握手，然后就开始正式的传输数据</li> <li>数据在进入服务端之前，可能还会先经过负责负载均衡的服务器，它的作用就是将请求合理的分发到多台服务器上，这时假设服务端会响应一个 HTML 文件</li> <li>首先浏览器会判断状态码是什么，如果是 200 那就继续解析，如果 400 或 500 的话就会报错，如果 300 的话会进行重定向，这里会有个重定向计数器，避免过多次的重定向，超过次数也会报错</li> <li>浏览器开始解析文件，如果是 gzip 格式的话会先解压一下，然后通过文件的编码格式知道该如何去解码文件</li> <li>文件解码成功后会正式开始渲染流程，先会根据 HTML 构建 DOM 树，有 CSS 的话会去构建 CSSOM 树。如果遇到 <code>script</code> 标签的话，会判断是否存在 <code>async</code> 或者 <code>defer</code> ，前者会并行进行下载并执行 JS，后者会先下载文件，然后等待 HTML 解析完成后顺序执行，如果以上都没有，就会阻塞住渲染流程直到 JS 执行完毕。遇到文件下载的会去下载文件，这里如果使用 HTTP 2.0 协议的话会极大的提高多图的下载效率。</li> <li>初始的 HTML 被完全加载和解析后会触发 <code>DOMContentLoaded</code> 事件</li> <li>CSSOM 树和 DOM 树构建完成后会开始生成 Render 树，这一步就是确定页面元素的布局、样式等等诸多方面的东西</li> <li>在生成 Render 树的过程中，浏览器就开始调用 GPU 绘制，合成图层，将内容显示在屏幕上了</li></ol></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4/6/2020, 11:42:19 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/dajun/assets/js/app.f343371c.js" defer></script><script src="/dajun/assets/js/2.0c3fdcc6.js" defer></script><script src="/dajun/assets/js/19.a8065c5a.js" defer></script>
  </body>
</html>
